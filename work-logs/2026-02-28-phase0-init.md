# 2026-02-28 Phase 0 — 프로젝트 초기 설정

## 작업 배경
- 1차 office-ai RAG 프로젝트 성공적 완성
- 기업용 멀티테넌트 RAG 시스템 "TrustRAG"를 처음부터 새로 구축

## 결정 사항
| 항목 | 결정 |
|------|------|
| Supabase | 새 프로젝트 생성 (1차와 완전 분리) |
| 프론트엔드 | office-ai.app/trust/ 서브 경로 |
| GitHub | nohyohan0727-byte/TrustRAG (신규) |
| 개발 도구 | Claude Code + Cursor 병행 |

## 생성된 파일
| 파일 | 설명 |
|------|------|
| `TRUSTRAG.md` | Claude/Cursor 공용 컨텍스트 (매 세션 시작 시 읽기) |
| `ROADMAP.md` | Phase 0~6 전체 구현 계획 |
| `WORK_HISTORY.md` | 작업 이력 (Claude/Cursor 공용) |
| `.env.example` | 환경변수 목록 |
| `.gitignore` | .env 등 제외 |
| `db/01_tables.sql` | 전체 테이블 스키마 |
| `db/02_rls.sql` | Row Level Security 정책 |
| `db/03_functions.sql` | RPC 함수 (권한 확인, 벡터 검색, 토큰 차감, 감사 로그) |
| `db/04_seed.sql` | Super Admin 초기 데이터 |

## DB 설계 핵심 결정
1. **문서 테이블 네이밍**: `tr_{company_slug}_{category_slug}` (예: `tr_jknetworks_ks_cert`)
2. **권한 격리**: 모든 벡터 검색 함수에 `p_company_id` 필터 강제
3. **동적 테이블 생성**: `create_category_table()` 함수로 카테고리 생성 시 자동 생성
4. **감사 로그**: `write_audit_log()` 함수로 모든 액션 기록

## 다음 단계 (Phase 1)
1. **사용자가 할 일**: Supabase에서 새 프로젝트 생성
   - https://supabase.com → New Project
   - Project Name: TrustRAG
   - 생성 후 Project ID, URL, Anon Key, Service Key를 .env에 기입
2. **AI가 할 일**: db/ SQL 파일을 Supabase에 순서대로 실행 (01 → 02 → 03 → 04)
